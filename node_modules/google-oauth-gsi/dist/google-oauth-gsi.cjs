"use strict";var b=Object.defineProperty;var P=(i,t,o)=>t in i?b(i,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[t]=o;var h=(i,t,o)=>(P(i,typeof t!="symbol"?t+"":t,o),o);Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const m=i=>{var o;return(o=i==null?void 0:i.clientId)!=null?o:i==null?void 0:i.client_id};class _{constructor({clientId:t,onScriptLoadError:o,onScriptLoadSuccess:e}){h(this,"clientId");h(this,"scriptLoadedSuccessfully",!1);h(this,"containerHeightMap",{large:"40",medium:"32",small:"20"});this.clientId=t,!(typeof window>"u")&&this.useLoadGsiScript({onScriptLoadError:o,onScriptLoadSuccess:e})}useLoadGsiScript({onScriptLoadSuccess:t,onScriptLoadError:o}={}){const e=document.createElement("script");e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.onload=()=>{this.scriptLoadedSuccessfully=!0,t&&t()},e.onerror=()=>{this.scriptLoadedSuccessfully=!1,o&&o()},document.body.appendChild(e)}useGoogleLogin(t){return o=>this.useGoogleLoginPostponed(t)(o)}useGoogleLoginPostponed({flow:t="implicit",scope:o="",onSuccess:e,onError:c,onNonOAuthError:d,overrideScope:r,...u}){var f;if(!this.scriptLoadedSuccessfully)return()=>{};const n=t==="implicit"?"initTokenClient":"initCodeClient",g=(f=window.google)==null?void 0:f.accounts.oauth2[n]({client_id:this.clientId,scope:r?o:`openid profile email ${o}`,callback:l=>{if(c&&l.error)return c(l);e&&e(l)},error_callback:l=>{d&&d(l)},...u});return t==="implicit"?l=>g.requestAccessToken(l):()=>g.requestCode()}useGoogleOneTapLogin(t){return()=>{this.useGoogleOneTapLoginPostponed(t)}}useGoogleOneTapLoginPostponed({onError:t,onSuccess:o,hosted_domain:e,cancel_on_tap_outside:c,promptMomentNotification:d}){var r,u;typeof window>"u"||!this.scriptLoadedSuccessfully||((r=window.google)==null||r.accounts.id.initialize({hosted_domain:e,cancel_on_tap_outside:c,client_id:this.clientId,callback:n=>{if(!(n!=null&&n.credential)&&t)return t();const{credential:g,select_by:s}=n;o({select_by:s,credential:g,clientId:m(n)})}}),(u=window.google)==null||u.accounts.id.prompt(d))}useRenderButton(t){return()=>{this.useRenderButtonPostponed(t)}}useRenderButtonPostponed({onSuccess:t,onError:o,useOneTap:e,promptMomentNotification:c,type:d="standard",theme:r="outline",size:u="large",text:n,shape:g,element:s,logo_alignment:w,width:f,locale:l,click_listener:L,...I}){var p,G,y;!this.scriptLoadedSuccessfully||((p=window.google)==null||p.accounts.id.initialize({client_id:this.clientId,callback:a=>{if(!(a!=null&&a.credential)&&o)return o();const{credential:S,select_by:A}=a;t({select_by:A,credential:S,clientId:m(a)})},...I}),s.style.height=this.containerHeightMap[u],(G=window.google)==null||G.accounts.id.renderButton(s,{type:d,size:u,text:n,theme:r,shape:g,width:f,locale:l,logo_alignment:w,click_listener:L}),e&&((y=window.google)==null||y.accounts.id.prompt(c)))}}function C(){var i;typeof window>"u"||(i=window.google)==null||i.accounts.id.disableAutoSelect()}function T(i,t,...o){return window.google?window.google.accounts.oauth2.hasGrantedAnyScope(i,t,...o):!1}function k(i,t,...o){return window.google?window.google.accounts.oauth2.hasGrantedAllScopes(i,t,...o):!1}exports.GoogleOAuthProvider=_;exports.googleLogout=C;exports.hasGrantedAllScopesGoogle=k;exports.hasGrantedAnyScopeGoogle=T;
